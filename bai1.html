<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Bài 1</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
 <style type="text/css">
 	body{
 		margin: 0;
 		padding: 10px;
 		background-image: url(https://hoaidoan.vn/wp-content/uploads/2021/03/background-dep-5.png);
 	}
 </style>
</head>
<body>
	<table class="table">
		<th><h1>Dãy X</h1></th>
		<th><h1>Dãy Y</h1></th>
	<tr><td>
	<h3>Nhập các phần tử cách nhau dấu cách</h3>
	<input type="text" name="nhap day 1" id="day1"> <button id="submit1" class="btn btn-primary">Gửi</button>
    <h3>Tính toán bài 1</h3>
      <label>Mảng</label>
      <label id="mang"></label><br>
      <label>Mảng sắp xếp</label>
      <label id="sapxep"></label><br>
     <label>Giá trị trung bình:</label><label id="trungbinh"></label><br>

     <label>Giá trị trung vị:</label><label id="trungvi"></label><br>

     <label>Giá trị Mode:</label><label id="mode"></label><br>

     <label>Giá trị độ lệch:</label><label id="dolech"></label><br>
     <h3>Biểu đồ BOXPLOT</h3>
     <label>Trung vị: </label><label id="trungvi1"></label><br>
     <label>Min : </label><label id="min"></label><br>
     <label>Max: </label><label id="max"></label><br>
     <label>Q1: </label><label id="Q1"></label><br>
     <label>Q3: </label><label id="Q3"></label><br>
     <label>IQR = Q3 -Q1 = </label><label id="IQR"></label><br>
     <label>L = Q1 - 1.5IQR= </label><label id="L"></label><br>
     <label>U = Q3 + 1.5IQR= </label><label id="U"></label><br>
     <h3>Chuẩn hóa Z-core</h3>
      <span id="zcore"></span>
      <h3>Làm trơn trung bình phân thùng theo chiều rộng: <input type="text" name="sothung" id="tronmean"></h3>
      <span id="lamtronmean" style="text-align: center;"></span>
  </td>
<!-- ------------------------------------------------------ -->
  <td>
  	<h3>Nhập các phần tử cách nhau dấu cách</h3>
	<input type="text" name="nhap day 1" id="dayY"> <button id="submit2" class="btn btn-primary">Gửi</button>
    <h3>Tính toán bài 1</h3>
      <label>Mảng</label>
      <label id="mangY"></label><br>
      <label>Mảng sắp xếp</label>
      <label id="sapxepY"></label><br>
     <label>Giá trị trung bình:</label><label id="trungbinhY"></label><br>

     <label>Giá trị trung vị:</label><label id="trungviY1"></label><br>

     <label>Giá trị Mode:</label><label id="modeY"></label><br>

     <label>Giá trị độ lệch:</label><label id="dolechY"></label><br>
     <h3>Biểu đồ BOXPLOT</h3>
     <label>Trung vị: </label><label id="trungviY"></label><br>
     <label>Min : </label><label id="minY"></label><br>
     <label>Max: </label><label id="maxY"></label><br>
     <label>Q1: </label><label id="Q1Y"></label><br>
     <label>Q3: </label><label id="Q3Y"></label><br>
     <label>IQR = Q3 -Q1 = </label><label id="IQRY"></label><br>
     <label>L = Q1 - 1.5IQR= </label><label id="LY"></label><br>
     <label>U = Q3 + 1.5IQR= </label><label id="UY"></label><br>
     <h3>Chuẩn hóa Z-core</h3>
      <span id="zcoreY"></span>
      <h3>Làm trơn trung bình phân thùng theo chiều sâu: <input type="text" name="sothung" id="tronmeanY"></h3>
      <span id="lamtronmeanY" style="text-align: center;"></span>

  </td>
</tr>
</table>
<h1>Xác định mối tương quan giữa X và Y <button class="btn btn-primary tuongquan">Xác định</button></h1>
<h3>Giá trị tương quan: <label id="gttuongquan"></label></h3>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type="text/javascript" >
	var lamtronsapxep = [];
	var lamtronsapxepY =[];
	$('#submit1').click(function(){
	 //9.1 4.5 5.3 6.7 6.5 7.0 6.0 5.5 7.0 7.0 8.5 8.6
	 //8.5 5.5 6.0 7.5 8.5 6.0 6.5 6.8 9.0 7.2 8.0 8.5
        var arr;
       var data = $('#day1').val();
       console.log(data);
       $('#mang').html(data);
       arr = data.split(/\s+/);
       var arrinput=[];
      for(let i = 0; i < arr.length; i++) 
  		arrinput[i] = parseFloat(arr[i]);
  		arrinput = sapxep(arrinput);
  		$('#sapxep').html(arrinput.toString());
  		console.log(arrinput); 	
//--- gia tri trung binh
       var mean = trungbinh(arrinput);
		$('#trungbinh').html(mean);	
//------------------------------------------------
      var trungvi1 = trungvi(arrinput);
      $('#trungvi').html(trungvi1);	
      $('#trungvi1').html(trungvi1);	
     
 // // mode-----------------------------------

       var mode = Timsolanxuathien(arrinput);
       $('#mode').html(mode);
     // do lech
     var dolech1= dolech(arrinput,mean);
     $('#dolech').html(dolech1);
// boxplot
   boxplot(arrinput,1);
// z core
 var arrayz = [];
  for(let i = 0; i < arr.length; i++) 
  		arrayz[i] = parseFloat(arr[i]);

  chuahoazcore(arrayz,mean,dolech1,1);
 //console.log(arrayz);
 // lam tron mean
 lamtronsapxep = sapxep(arrayz);
	})

//--------------------------------Day Y

	$('#submit2').click(function(){
	 //9.1 4.5 5.3 6.7 6.5 7.0 6.0 5.5 7.0 7.0 8.5 8.6
	 //8.5 5.5 6.0 7.5 8.5 6.0 6.5 6.8 9.0 7.2 8.0 8.5
        var arr;
       var data = $('#dayY').val();
       console.log(data);
       $('#mangY').html(data);
       arr = data.split(/\s+/);
       var arrinput=[];
      for(let i = 0; i < arr.length; i++) 
  		arrinput[i] = parseFloat(arr[i]);
  		arrinput = sapxep(arrinput);
  		$('#sapxepY').html(arrinput.toString());
  		console.log(arrinput); 	
//--- gia tri trung binh
       var mean = trungbinh(arrinput);
		$('#trungbinhY').html(mean);	
//------------------------------------------------
      var trungvi1 = trungvi(arrinput);
      $('#trungviY').html(trungvi1);	
      $('#trungviY1').html(trungvi1);	
     
 // // mode-----------------------------------

       var mode = Timsolanxuathien(arrinput);
       $('#modeY').html(mode);
     // do lech
     var dolech1= dolech(arrinput,mean);
     $('#dolechY').html(dolech1);
// boxplot
   boxplot(arrinput,2);
// z core
 var arrayz = [];
  for(let i = 0; i < arr.length; i++) 
  		arrayz[i] = parseFloat(arr[i]);

  chuahoazcore(arrayz,mean,dolech1,2);
 //console.log(arrayz);
 // lam tron mean
 lamtronsapxepY = sapxep(arrayz);
	})

//-------------------------------------------
function sapxep(arrin){
for(let i = 0 ; i < arrin.length -1 ; i++){
     	for (var j = i+1; j < arrin.length; j++) {
    		if(arrin[i] > arrin[j])
    		{
    			var temp = arrin[i];
    			arrin[i] = arrin[j];
    			arrin[j] = temp;
    		}
     	}
     }
 return arrin;
}
function trungbinh(arrin){
   var mean = 0;
   for(let i = 0; i < arrin.length; i++) 
  		mean += arrin[i];

  	return (mean/arrin.length).toFixed(2);	


}
function trungvi(arrin){
 var vitritb = (arrin.length)/2;
     
     if (arrin.length%2 == 0){
         var trungvi = arrin[arrin.length/2]+arrin[arrin.length/2 - 1];
       return trungvi/2;

     }
     else{
     	 var trungvi = arrinput[arrinput.length/2 - 0.5];
     	return trungvi;
     }


}


function Timsolanxuathien(arr)
{
	var max=0;
	var dem=1;
	var giatri;
	for(let i=0;i<arr.length;i++)
	{
		if(arr[i]==arr[i+1])
		{
			dem++;
				if(dem>max)
				{
					max=dem;
					giatri = arr[i];
				}	
			
		}
		else
		{
			
           dem=1;
		}
	}
	if(max == 1)
	return -1;
    return giatri;
}
function dolech(arrinput,mean){
var tongbp = 0;
     for(let i=0;i<arrinput.length;i++)
     	tongbp += arrinput[i]*arrinput[i];

     gtdolech = 1/(arrinput.length)*tongbp - (mean*mean);
	 	return Math.sqrt(gtdolech).toFixed(2);
}
function boxplot(arrinput,bang){
  var min = arrinput[0];
  var max = arrinput[arrinput.length -1];
   var vitriq = arrinput.length%4/4;
   var Q1 = 0;
   Q1 = (arrinput[arrinput.length*0.25- vitriq]+arrinput[arrinput.length*0.25-1 - vitriq])/2;
   var vitriq3 = vitriq*3;
   var Q3 = 0;
   Q3 = (arrinput[arrinput.length*0.75- vitriq3]+arrinput[arrinput.length*0.75-1 - vitriq3])/2;
   console.log(Q3);
   var IQR = Q3 - Q1;
   var L = Q1 - 1.5*IQR;
   var U = Q3 + 1.5*IQR;
 if(bang == 1){
  $('#min').html(min);
   $('#max').html(max);
   $('#Q1').html(Q1);
   $('#Q3').html(Q3);
   $('#IQR').html(IQR);
   $('#L').html(L);
   $('#U').html(U);
 }
 if(bang == 2){
 $('#minY').html(min);
   $('#maxY').html(max);
   $('#Q1Y').html(Q1);
   $('#Q3Y').html(Q3);
   $('#IQRY').html(IQR);
   $('#LY').html(L);
   $('#UY').html(U);

 }
}
function chuahoazcore(arrinput,mean,dolech,bang){
	var str = '<ul>';
 for (var i = 0; i < arrinput.length; i++) {
 	str += '<li>V'+(i+1)+' : ' +((arrinput[i]-mean)/dolech).toFixed(2)+'</li>';
 }
 str+='</ul>';
 //console.log(str);
 if(bang == 1)
$('#zcore').html(str);
 if(bang == 2)
$('#zcoreY').html(str);
}

$('#tronmean').change(function(){
 var chieurong = $(this).val();
 // tính số thùng
 var tongsothung = Math.abs(lamtronsapxep[0] - lamtronsapxep[lamtronsapxep.length -1])/chieurong;

 
 var mocgtri = lamtronsapxep[0];
console.log(lamtronsapxep);
// var vitri = 0;
//  //------------------
//  var str = '<table ><th>ban đầu</th><th>Sau làm trơn (TỰ TÍNH)</th>';
//  for (var i = 0; i < tongsothung; i++) { 
//     var strs = '<tr><td>Bin '+(i+1) + ' </td><td>';
//          for(let j = vitri ; j < lamtronsapxep.length ; j++){
//              if(lamtronsapxep[j] >= (mocgtri+parseFloat(chieurong))){
//             strs += "</td></tr>"
//             mocgtri += parseFloat(chieurong);
//              vitri = j;
//            }
//            if(lamtronsapxep[j] >= mocgtri && lamtronsapxep[j] < (mocgtri+parseFloat(chieurong))){
//              strs += "; "+ lamtronsapxep[j];
//            }
            

//          }
//         console.log(strs);
//  }
//  console.log(str);
  $('#lamtronmean').html("Tự tính");

})
$('#tronmeanY').change(function(){
 var sothung = $(this).val();
 var str = '<table ><th>ban đầu</th><th>Sau làm trơn (TỰ TÍNH)</th>'
 for (var i = 0; i < sothung; i++) { 
 	str +='<tr><td>bin '+(i+1)+' ';
 	for(var j = 0; j < lamtronsapxepY.length/sothung ; j++){
    str += '; '+ lamtronsapxepY[i*lamtronsapxepY.length/sothung+j]+' ';
 	}
 	str += '</td></tr>';
 }
 console.log(str);
 $('#lamtronmeanY').html(str);

})
//--------- tinh tuong quan
$('.tuongquan').click(function(){
 var demmangX = $('#mang').text();
 var demmangY = $('#mangY').text();
 var dolechX = parseFloat($('#dolech').text());
 var dolechY = parseFloat($('#dolechY').text());;
 var soptu = lamtronsapxep.length;
 var trungbinhX = parseFloat($('#trungbinh').text());
 var trungbinhY = parseFloat($('#trungbinhY').text());
 var mangX = [];
 var mangY = [];

 demmangX = demmangX.split(/\s+/);
 for (var i = 0; i < demmangX.length; i++) {
 	mangX[i] = parseFloat(demmangX[i]);
 }

 demmangY = demmangY.split(/\s+/);
 for (var i = 0; i < demmangY.length; i++) {
 	mangY[i] = parseFloat(demmangY[i]);
 }

console.log(mangX);

console.log(mangY);
console.log(dolechX);
console.log(dolechY);
console.log(soptu);
console.log(trungbinhX);
console.log(trungbinhY);
var Rxy = 0;

for(let i = 0 ; i < soptu ; i++){
  Rxy += mangX[i]*mangY[i]; 
}

var a = (Rxy- soptu*trungbinhX*trungbinhY)/(soptu*dolechX*dolechY);
$('#gttuongquan').html(a.toFixed(2));

})



</script>
</html>
